## 用户部门角色菜单设计
1. 用户与部门的关系思考
    * 多对多: 用户表, 部门表, 用户部门表
        - 举例: 公司新增一个客户, 需要填入归属人,归属部门. 一个人属于多个部门就存在选哪个的疑问
        - 另外: 增加了很多查询的复杂度
    * 多对一: 用户表有所属部门字段, 部门表
        - 举例: 一位领导可能兼职负责另外一个部门的领导职位
    * 结论: 扩展的多对一关系, 用户表有所属部门字段, 部门表有负责人字段
2. 用户组, 角色组的思考
    * 在很多系统, 涉及有这两个概念, 比如新人进入系统, 需要分配角色A,角色B,角色C等多个角色, 将角色ABC组织起来设置
    为角色组X, 进行同时分配. 但其实更好的做法是新建一个角色M拥有角色ABC的菜单即可
    * 结论: 本系统排除这两个概念
3. 创建人账号和名字的思考
    * 如何存储
        - 账号/名字都存就有冗余字段, 且如果名字修改, 业务表中名字不能及时修改
        - 仅存账号, 可以取消冗余, 但前端展示都是需要显示名字的, 常见的解决方案如下
            - 查出所有人员的名字代码或前端进行转义处理, 人较多的情况下性能较差
            - SQL语句中进行关联处理, 这样简单的增删改查也要处理
            - AOP进行对特定字段处理, 这样不够直观灵活
        - 结论: 人员名字变更频率非常低, 建议冗余字段存储, 极大的简化很多处理
    * 是否需要存储
        - 业务表: 是的
        - 系统表: 用户部门角色菜单, 这四个关键系统表的创建人应该都是管理员才可以的, 建议不用存储.
                  关键时刻查看原因, 可以从系统的全局日志中查看
4. 用户查询的数据权限思考
    * 用户表添加字段:
        - 数据权限类型: 个人(P), 本部门(O), 跨部门(M手动选择部门)
            * 备注: 枚举值的代表含义, Person, Organization, Many(Manual)
        - 数据权限范围: (跨部门的时候存逗号分隔的部门信息)
5. 用户获得菜单(包括按钮)的思考
   * 情景分析
    > 一个新人入公司, 他/她能看到的菜单应该和职位有关系, 即: 用户 --> 职位 --> 角色 --> 菜单
      但一个人的职位只有一个, 特殊情况下需要添加一些菜单, 这时候可以另外分配一些特定角色, 即用户 --> 角色 --> 菜单
      这样就有两种方式了. 且职位有风控经理, 角色也有风控经理, 这样子又有些混淆了,
      是否可以将其统一呢?
   * 推荐: 角色加入类型字段: 职位角色(P), 一般角色(C), 这样都是 用户 --> 角色 --> 菜单
6. 管理员角色的思考
    * 通常系统都有个管理员角色,然后菜单都有了, 数据权限都可以看了等等
    * 推荐: 分类处理
        - adminMenu     所有菜单按钮都展示(当然还是手动将所有菜单分配给这个角色)
        - adminData     所有数据权限都展示
        - adminActiviti 工作流的管理员查看权限
